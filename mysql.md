## 数据库的相关概念

DB： 数据库(DataBase)

DBMS：数据库管理系统(DataBase Management System)

SQL：结构化查询语言(Structured Query Language)



## RDBMS 和 非RDBMS

关系型数据库(RDBMS) ：将复杂的数据结构归结为简单的二元关系

​	主要以行 (row) 和 列 (column) 的形式存储数据，以便于理解。一系列的行和列组成为表(table) 一组表组成了一个库（database）



## 如果mysql的自增Id用完了

可以从设置主键Id和不设置主键Id两个角度来说

设置主键的话,满了会报主键冲突。

不设置主键的话,InnoDB会自动帮我们创建一个不可见的、长度为6字节的 'row_id' 最大可以达到**2的48幂次-1**,如果满了就会重新从1开始插入数据,之前的数据就会覆盖掉。

最好的回答：一个表数据不可能达到那么多，分库分表，分布式环境下要注意主键生成问题，做到主键唯一（如snow flake算法）



## 说说MySQL 事务的实现原理

特点：

​	原子性、一致性、隔离性、持久性



### 事务想要做到什么效果？

​	按我理解，无非是要做到**可靠性**以及**并发处理**

​	可靠性：数据库要保证当insert或update操作时抛异常或者数据库crash的时候需要保障数据的操作前后的一致，想要做到这个，我需要知道我修改之前和修改之后的状态，所以就有了undo log和redo log。

​	并发处理：也就是说当多个并发请求过来，并且其中有一个请求是对数据修改操作的时候会有影响，为了避免读到脏数据，所以需要对事务之间的读写进行隔离，至于隔离到啥程度得看业务系统的场景了，实现这个就得用MySQL 的隔离级别。



### 实现事务功能的三个技术

​	分别是日志文件(redo log 和 undo log)，锁技术以及MVCC



## mysql优化

1.数据库服务器的内核优化

2.my.conf配置，搭配压力测试进行调试

3.sql语句调优

​	1.使用缓存优化查询(进行多次相同的查询，结果就会放入缓存中，后续再进行相同的查询，直接从缓存中提取，不会到表中提取)

​	2.explain检测SQL查询（explain select ...）

​	3.给搜索字段建立索引 where 后面的字段建立索引（集聚索引和非积聚索引的查询原理）大数据量的查询不适合建立索引

​	4.limit 1（明确只有一行数据的时候）

​	5.永久链接（在一些极端的环境中，apache会发出http请求，创建子进程去请求数据库）

​	6.选择正确的数据库引擎 myISAM	InnoDB

​	7.在进行大量delete	insert拆分

​	8.数据类型 尽量使用小的。因为数据是存在硬盘上的，数据量小可以节约硬盘空间、读取数据的速度

​	9.固定字段长度。这样做是在数据库计算偏移量时，非常轻松，

​	10.尽量不要给null，建议使用 ' '

​	11.明确的固定的字段上使用enum（性别、国家、市）不要使用varchar

​	12.避免使用select * (查询越多，速度就越慢，数据越多对网络的传输也会负载过重)

​	13.rand() 计算是在cpu上面进行的

​	14.id主键每张表都要建立 集群 分区

​	15.连接两表的时候，join	尽量保持两个字段的类型一致

​	16.垂直分割	将表按列的形式分割成表