## 如果mysql的自增Id用完了

可以从设置主键Id和不设置主键Id两个角度来说

设置主键的话,满了会报主键冲突。

不设置主键的话,InnoDB会自动帮我们创建一个不可见的、长度为6字节的 'row_id' 最大可以达到**2的48幂次-1**,如果满了就会重新从1开始插入数据,之前的数据就会覆盖掉。

最好的回答：一个表数据不可能达到那么多，分库分表，分布式环境下要注意主键生成问题，做到主键唯一（如snow flake算法）



## 说说MySQL 事务的实现原理

特点：

​	原子性、一致性、隔离性、持久性



### 事务想要做到什么效果？

​	按我理解，无非是要做到**可靠性**以及**并发处理**

​	可靠性：数据库要保证当insert或update操作时抛异常或者数据库crash的时候需要保障数据的操作前后的一致，想要做到这个，我需要知道我修改之前和修改之后的状态，所以就有了undo log和redo log。

​	并发处理：也就是说当多个并发请求过来，并且其中有一个请求是对数据修改操作的时候会有影响，为了避免读到脏数据，所以需要对事务之间的读写进行隔离，至于隔离到啥程度得看业务系统的场景了，实现这个就得用MySQL 的隔离级别。



### 实现事务功能的三个技术

​	分别是日志文件(redo log 和 undo log)，锁技术以及MVCC